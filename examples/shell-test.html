<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Franklin Mini Codeblock - Shell Syntax Test</title>
    <style>
/* CSS custom properties for reuse */
.fmc-wrapper {
    --fmc-bg: #1a1a1a;
    --fmc-bg-dark: #0d0d0d;
    --fmc-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
    --fmc-pink: #ff6b9d;
    --fmc-green: #a5d6a7;
    --fmc-gray: #6a7b8a;
    --fmc-orange: #ffca80;
    --fmc-blue: #82aaff;
    --fmc-peach: #ff9e64;
    --fmc-teal: #7fdbca;
    --fmc-purple: #c792ea;
    --fmc-cyan: #4ec9b0;
    position: relative;
    margin: 1.5rem 0;
    border-radius: 4px;
    overflow: hidden;
    background: var(--fmc-bg);
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.fmc-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    background: var(--fmc-bg-dark);
}

.fmc-lang {
    font: 600 0.75rem/1 var(--fmc-mono);
    color: #888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.fmc-copy {
    padding: 0.4rem 0.85rem;
    font: 500 0.8rem/1 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    color: #aaa;
    background: #2a2a2a;
    border: 1px solid #3a3a3a;
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.fmc-copy:hover {
    color: #fff;
    background: #3a3a3a;
    border-color: #4a4a4a;
}

.fmc-copy:active {
    transform: scale(0.97);
}

.fmc-pre {
    margin: 0;
    padding: 1rem;
    overflow-x: auto;
    background: var(--fmc-bg);
}

/* Scroll edge fades */
.fmc-wrapper::before,
.fmc-wrapper::after {
    content: "";
    position: absolute;
    top: 0;
    width: 12px;
    height: 100%;
    pointer-events: none;
}

.fmc-wrapper::after {
    right: 0;
    background: linear-gradient(to left, rgba(0,0,0,0.8), transparent);
}

.fmc-wrapper::before {
    left: 0;
    background: linear-gradient(to right, rgba(0,0,0,0.8), transparent);
    opacity: 0;
    transition: opacity 0.15s ease;
}

.fmc-wrapper.fmc-wrapper--left::before {
    opacity: 1;
}

.fmc-code {
    display: block;
    font: 0.9rem/1.6 var(--fmc-mono);
    color: #e8e8e8;
    white-space: pre;
    word-wrap: normal;
    word-break: normal;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Syntax highlighting */
.fmc-keyword, .fmc-tag, .fmc-operator { color: var(--fmc-pink); }
.fmc-string, .fmc-url-query, .fmc-url-query-value { color: var(--fmc-green); }
.fmc-comment { color: var(--fmc-gray); font-style: italic; }
.fmc-number, .fmc-attr, .fmc-url-port, .fmc-url-query-key, .fmc-url-query-eq { color: var(--fmc-orange); }
.fmc-function, .fmc-variable, .fmc-url-hash { color: var(--fmc-blue); }
.fmc-literal, .fmc-builtin, .fmc-url-protocol, .fmc-url-slash, .fmc-url-query-mark, .fmc-url-query-amp { color: var(--fmc-peach); }
.fmc-selector, .fmc-flag, .fmc-url-host { color: var(--fmc-teal); }
.fmc-property, .fmc-preprocessor, .fmc-url-path { color: var(--fmc-purple); }
.fmc-type { color: var(--fmc-cyan); }
.fmc-section { color: var(--fmc-peach); font-weight: 600; }

/* Responsive */
@media (max-width: 768px) {
    .fmc-code { font-size: 0.85rem; }
    .fmc-pre { padding: 1rem 0.75rem; }
    .fmc-header { padding: 0.6rem 0.75rem; }
    .fmc-copy { font-size: 0.75rem; padding: 0.35rem 0.7rem; }
}

@media (max-width: 480px) {
    .fmc-code { font-size: 0.8rem; }
    .fmc-wrapper { margin: 1rem -1rem; border-radius: 0; }
}

/* Scrollbar */
.fmc-pre::-webkit-scrollbar { height: 8px; }
.fmc-pre::-webkit-scrollbar-track { background: var(--fmc-bg-dark); }
.fmc-pre::-webkit-scrollbar-thumb { background: #3a3a3a; border-radius: 4px; }
.fmc-pre::-webkit-scrollbar-thumb:hover { background: #4a4a4a; }

    </style>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            background: #f5f5f5;
            color: #333;
        }
        h1 {
            color: #1a1a1a;
            border-bottom: 2px solid #ddd;
            padding-bottom: 0.5rem;
        }
        h2 {
            color: #333;
            margin-top: 2rem;
            font-size: 1.2rem;
        }
        .test-case {
            margin: 2rem 0;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .test-description {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 1rem;
        }
        .raw-code {
            background: #f8f8f8;
            border-left: 3px solid #ddd;
            padding: 1rem;
            margin: 1rem 0;
            font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
            font-size: 0.9rem;
            color: #333;
        }
        .legend {
            margin: 2rem 0;
            padding: 1rem;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .legend h3 {
            margin-top: 0;
        }
        .color-sample {
            display: inline-block;
            margin: 0.25rem 0.5rem 0.25rem 0;
        }
        .color-box {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            margin-right: 0.25rem;
            vertical-align: middle;
            border: 1px solid #333;
        }
    </style>
</head>
<body>
    <h1>Franklin Mini Codeblock - Shell Syntax Highlighting Test</h1>
    
    <div class="legend">
        <h3>Expected Highlighting Colors</h3>
        <p>This test verifies that both opening <code>(</code> and closing <code>)</code> parentheses are highlighted with the same operator color.</p>
        <div>
            <span class="color-sample"><span class="color-box" style="background: #ff6b9d;"></span> <strong>Operator:</strong> ( ) $( `</span>
            <span class="color-sample"><span class="color-box" style="background: #a5d6a7;"></span> <strong>String:</strong> '...' "..."</span>
            <span class="color-sample"><span class="color-box" style="background: #ff9e64;"></span> <strong>Builtin:</strong> echo, test, [ ]</span>
            <span class="color-sample"><span class="color-box" style="background: #82aaff;"></span> <strong>Variable:</strong> $var</span>
        </div>
    </div>

    <div class="test-case">
        <h2>User-provided sample with parentheses in single-quoted string</h2>
        <div class="test-description">Raw code:</div>
        <div class="raw-code">defaults write com.Ubisoft.AssassinsCreedBrotherhood AppleLanguages &#039;(&quot;en-US&quot;)&#039;</div>
        
        <div class="test-description">Highlighted output:</div>
        <div class="fmc-wrapper">
            <div class="fmc-header">
                <span class="fmc-lang">SHELL</span>
                <button class="fmc-copy" disabled>Copy</button>
            </div>
            <pre class="fmc-pre"><code class="fmc-code"><span class="fmc-function">defaults</span> write com.Ubisoft.AssassinsCreedBrotherhood AppleLanguages &#039;<span class="fmc-operator">(</span><span class="fmc-string">&quot;en-US&quot;</span><span class="fmc-operator">)</span>&#039;</code></pre>
        </div>
    </div>

    <div class="test-case">
        <h2>Subshell with $(...)</h2>
        <div class="test-description">Raw code:</div>
        <div class="raw-code">echo $(ls)</div>
        
        <div class="test-description">Highlighted output:</div>
        <div class="fmc-wrapper">
            <div class="fmc-header">
                <span class="fmc-lang">SHELL</span>
                <button class="fmc-copy" disabled>Copy</button>
            </div>
            <pre class="fmc-pre"><code class="fmc-code"><span class="fmc-builtin">echo</span> <span class="fmc-operator">$(</span><span class="fmc-function">ls</span><span class="fmc-operator">)</span></code></pre>
        </div>
    </div>

    <div class="test-case">
        <h2>Parentheses in single-quoted string (not a subshell)</h2>
        <div class="test-description">Raw code:</div>
        <div class="raw-code">var=&#039;(not-subshell)&#039;</div>
        
        <div class="test-description">Highlighted output:</div>
        <div class="fmc-wrapper">
            <div class="fmc-header">
                <span class="fmc-lang">SHELL</span>
                <button class="fmc-copy" disabled>Copy</button>
            </div>
            <pre class="fmc-pre"><code class="fmc-code">var=&#039;<span class="fmc-operator">(</span>not-subshell<span class="fmc-operator">)</span>&#039;</code></pre>
        </div>
    </div>

    <div class="test-case">
        <h2>Backtick command substitution</h2>
        <div class="test-description">Raw code:</div>
        <div class="raw-code">echo `date`</div>
        
        <div class="test-description">Highlighted output:</div>
        <div class="fmc-wrapper">
            <div class="fmc-header">
                <span class="fmc-lang">SHELL</span>
                <button class="fmc-copy" disabled>Copy</button>
            </div>
            <pre class="fmc-pre"><code class="fmc-code"><span class="fmc-builtin">echo</span> <span class="fmc-operator">`</span>date<span class="fmc-operator">`</span></code></pre>
        </div>
    </div>

    <div class="test-case">
        <h2>Single bracket test operator</h2>
        <div class="test-description">Raw code:</div>
        <div class="raw-code">if [ -f /etc/passwd ]; then echo yes; fi</div>
        
        <div class="test-description">Highlighted output:</div>
        <div class="fmc-wrapper">
            <div class="fmc-header">
                <span class="fmc-lang">SHELL</span>
                <button class="fmc-copy" disabled>Copy</button>
            </div>
            <pre class="fmc-pre"><code class="fmc-code"><span class="fmc-keyword">if</span> <span class="fmc-builtin">[</span><span class="fmc-flag"> -f</span> /etc/passwd <span class="fmc-builtin">]</span><span class="fmc-operator">;</span> <span class="fmc-keyword">then</span> <span class="fmc-builtin">echo</span> yes<span class="fmc-operator">;</span> <span class="fmc-keyword">fi</span></code></pre>
        </div>
    </div>

    <div class="test-case">
        <h2>Double bracket test operator</h2>
        <div class="test-description">Raw code:</div>
        <div class="raw-code">if [[ -n &quot;$var&quot; ]]; then</div>
        
        <div class="test-description">Highlighted output:</div>
        <div class="fmc-wrapper">
            <div class="fmc-header">
                <span class="fmc-lang">SHELL</span>
                <button class="fmc-copy" disabled>Copy</button>
            </div>
            <pre class="fmc-pre"><code class="fmc-code"><span class="fmc-keyword">if</span> <span class="fmc-builtin">[[</span><span class="fmc-flag"> -n</span> <span class="fmc-string">&quot;$var&quot;</span> <span class="fmc-builtin">]]</span><span class="fmc-operator">;</span> <span class="fmc-keyword">then</span></code></pre>
        </div>
    </div>

    <div style="margin: 3rem 0; padding: 1rem; background: #fff; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <h3>Visual Inspection Checklist</h3>
        <ul>
            <li>✓ Both <code>(</code> and <code>)</code> should have the same pink/operator color</li>
            <li>✓ The <code>$(</code> in <code>echo $(ls)</code> should be highlighted as an operator</li>
            <li>✓ Parentheses inside strings should be green (string color)</li>
            <li>✓ Square brackets <code>[ ]</code> and <code>[[ ]]</code> should be highlighted</li>
            <li>✓ Backticks <code>`</code> should have the operator color</li>
        </ul>
    </div>
</body>
</html>
